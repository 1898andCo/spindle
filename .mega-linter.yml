---
# Configuration file for MegaLinter
# See all available variables at https://megalinter.io/configuration/ and in linters documentation

APPLY_FIXES: none # all, none, or list of linter keys
# ENABLE: # If you use ENABLE variable, all other languages/formats/tooling-formats will be disabled by default
# ENABLE_LINTERS: # If you use ENABLE_LINTERS variable, all other linters will be disabled by default
DISABLE:
  - COPYPASTE # Uncomment to disable checks of excessive copy-pastes
DISABLE_LINTERS:
  - SPELL_LYCHEE # Lots of false positives
SHOW_ELAPSED_TIME: true
FILEIO_REPORTER: false # Switch to true to upload artifacts to FileIO
# DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect errors but not block CI to pass
SPELL_CSPELL_DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect spelling mistakes but not block CI to pass
REPOSITORY_DEVSKIM_ARGUMENTS: "--skip-git-ignored-files" # Uncomment to skip git ignored files

# TODO: this is temporary, devskim is not obeying the skip-git-ignored-files argument
REPOSITORY_DEVSKIM_DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect vulnerabilities in code but not block CI to pass

# TODO: this is temporary, we should fix the issues in the code, Failing on github actions
REPOSITORY_CHECKOV_DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect vulnerabilities in code but not block CI to pass

# FILTER_REGEX_INCLUDE: (src/) # Uncomment to only lint files in src/ folder

# This will always fail because of unknown directives in the rst files, resolve what we can and ignore the rest
RST_RSTFMT_DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect RST formatting issues but not block CI to pass

# This will always fail because of unknown directives in the rst files, resolve what we can and ignore the rest
RST_RSTCHECK_DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect RST formatting issues but not block CI to pass

# This will always fail because of unknown directives in the rst files, resolve what we can and ignore the rest
RST_RST_LINT_DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect RST formatting issues but not block CI to pass

# TODO: this is temporary, we should fix the issues in the code
COPYPASTE_JSCPD_DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect excessive copy-pastes but not block CI to pass

# TODO: investigate why this is not working, I think an RST linter is prettifing the file and then the editorconfig check fails
EDITORCONFIG_FILTER_REGEX_EXCLUDE: (docs\/.*\.rst) # Uncomment to exclude all rst files in docs/ folder for EditorConfig checks

# TODO: inside each script, remediate or disable the bandit check in the code. As these are only used to help dev Its not a security issue as the scripts are not exposed in the package
PYTHON_BANDIT_FILTER_REGEX_EXCLUDE: (scripts\/.*\.py) # Uncomment to exclude all py files in scripts/ folder for Bandit checks
PYTHON_MYPY_FILTER_REGEX_EXCLUDE: (docs\/.*\.py|\/config\/environments\/original.py) # Uncomment to exclude all py files in docs/ folder for Mypy checks

# docs/ is excluded because it contains a lot of autogenerated files, original.py is excluded because it is a copy of the original file and will be removed
# plugins.py is excluded because it generates to many false positives because of the hacked way we use it
PYTHON_PYRIGHT_FILTER_REGEX_EXCLUDE: (docs\/.*\.py|\/config\/environments\/original.py|base\/plugins.py|__init__.py) # Uncomment to exclude all py files in docs/ folder for Pyright checks
EDITORCONFIG_EDITORCONFIG_CHECKER_FILTER_REGEX_EXCLUDE: (src\/clip\/base\/services\/aws\/cognito.py)
JSON_JSONLINT_FILTER_REGEX_EXCLUDE: (.devcontainer\/devcontainer.json)
PYTHON_FLAKE8_FILTER_REGEX_EXCLUDE: (__init__.py) # ignore init files since they throw F401 and F403 errors
PYTHON_FLAKE8_ARGUMENTS: --ignore=I001,I002,I003,I004,I005,W503 # Ignore isort within Flake8 due to conflicts with other linters
PYTHON_RUFF_FILTER_REGEX_EXCLUDE: (__init__.py) # ignore init files since they throw F401 and F403 errors

CLEAR_REPORT_FOLDER: true

ADDITIONAL_EXCLUDED_DIRECTORIES:
  - docs # Turning off docs scanning due to sphinx methods not being recognized
  - .idea
  - .vscode
  - venv

PRE_COMMANDS:
  - command: pip install -e . # Install the project in editable mode
  - command: pip install -r requirements/dev.txt # Install the project dev dependencies
